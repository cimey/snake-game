(()=>{"use strict";var e={257:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Food=void 0;const o=i(134);t.Food=class{constructor(e,t,i){this._position=e,this._size=t,this._color=i,this.Awake()}Update(){this.Clear(),this.Draw()}Awake(){this.Clear(),this.Draw()}Clear(){o.CanvasLayer.ForegroundCanvas.ClearRect(this._position,this._size)}Draw(){o.CanvasLayer.ForegroundCanvas.FillRectangle(this._position,this._size,this._color)}}},188:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const o=i(257),s=i(310),n=i(491),r=i(134),a=i(382),c=i(737),d=i(87);t.Game=class{constructor(){this._food=null,this._level=s.Settings.level.medium,this._gameOver=!1,this._score=0,this._snake=new n.Snake,this._foodPosition=this.getRandomPosition(),this.InitFood(this._foodPosition),this.Update()}Update(){var e;if(!this._gameOver){if(this.HitTheWall()||this._snake.DoesSnakeOverlaps)return this._gameOver=!0,void r.CanvasLayer.ForegroundCanvas.DrawLabel("Game Over",new d.Vector2D(s.Settings.foreGroundCanvas.width/2,s.Settings.foreGroundCanvas.height/2));this.ClearGameScreen(),this.DrawGameScreen(),this.SnakeEatFood()&&(this._foodPosition=this.getRandomPosition(),this.InitFood(this._foodPosition),this._snake.AddNewNode(),this._score++),this._snake.Update(),null===(e=this._food)||void 0===e||e.Update(),setTimeout((()=>{this.Update()}),this._level)}}DrawGameScreen(){r.CanvasLayer.BackgroundCanvas.FillRectangle(new d.Vector2D(s.Settings.backGroundCanvas.x,s.Settings.backGroundCanvas.y),new d.Vector2D(s.Settings.backGroundCanvas.width,s.Settings.backGroundCanvas.height),s.Settings.backGroundCanvas.color),r.CanvasLayer.ForegroundCanvas.FillRectangle(new d.Vector2D(s.Settings.foreGroundCanvas.x,s.Settings.foreGroundCanvas.y),new d.Vector2D(s.Settings.foreGroundCanvas.width,s.Settings.foreGroundCanvas.height),s.Settings.foreGroundCanvas.color),r.CanvasLayer.ForegroundCanvas.DrawLabel("Score: "+this._score.toString(),new d.Vector2D(10,30))}ClearGameScreen(){r.CanvasLayer.BackgroundCanvas.ClearRect(new d.Vector2D(s.Settings.backGroundCanvas.x,s.Settings.backGroundCanvas.y),new d.Vector2D(s.Settings.backGroundCanvas.width,s.Settings.backGroundCanvas.height)),r.CanvasLayer.ForegroundCanvas.ClearRect(new d.Vector2D(s.Settings.foreGroundCanvas.x,s.Settings.foreGroundCanvas.y),new d.Vector2D(s.Settings.foreGroundCanvas.width,s.Settings.foreGroundCanvas.height))}InitFood(e){this._food=new o.Food(e,new d.Vector2D(s.Settings.food.width,s.Settings.food.height),s.Settings.food.color)}SnakeEatFood(){return!!this._snake.Head&&((this._snake.Direction==a.Directions.Right||this._snake.Direction==a.Directions.Left)&&this._snake.Head.y==this._foodPosition.y&&(this._snake.Head.x>=this._foodPosition.x&&this._snake.Head.x<=this._foodPosition.x+s.Settings.food.width||this._snake.Head.x+s.Settings.food.width>=this._foodPosition.x&&this._snake.Head.x+s.Settings.food.width<=this._foodPosition.x)||(this._snake.Direction==a.Directions.Up||this._snake.Direction==a.Directions.Down)&&this._snake.Head.x==this._foodPosition.x&&(this._snake.Head.y>=this._foodPosition.y&&this._snake.Head.y<=this._foodPosition.y+s.Settings.food.height||this._snake.Head.y+s.Settings.food.height>=this._foodPosition.y&&this._snake.Head.y+s.Settings.food.height<=this._foodPosition.y))}HitTheWall(){if(!this._snake.Head)return!1;let e=this._snake.Head.x,t=this._snake.Head.y,i=s.Settings.foreGroundCanvas.x,o=s.Settings.foreGroundCanvas.y,n=i+s.Settings.foreGroundCanvas.width,r=o+s.Settings.foreGroundCanvas.height;return e-(this._snake.Direction===a.Directions.Left?s.Settings.node.width:0)<=i-1||e+(this._snake.Direction===a.Directions.Right?s.Settings.node.width:0)>=n-1||t-(this._snake.Direction===a.Directions.Up?s.Settings.node.height:0)<=o-1||t+(this._snake.Direction===a.Directions.Down?s.Settings.node.height:0)>=r-1}getRandomPosition(){return new d.Vector2D(c.NodeUtils.GenerateRandomInt(0,23)*s.Settings.node.width,c.NodeUtils.GenerateRandomInt(0,23)*s.Settings.node.width)}}},243:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SnakeNode=void 0;const o=i(134);t.SnakeNode=class{constructor(e,t,i,o,s){this._direction=e,this._position=i,this._size=t,this._color=o,this._gameDirection=s}Update(){this.Clear(),this.Draw()}Awake(){this.Draw()}set Position(e){this._position=e}get Position(){return this._position}get Size(){return this._size}Draw(){o.CanvasLayer.ForegroundCanvas.FillRectangle(this._position,this._size,this._color)}Clear(){o.CanvasLayer.ForegroundCanvas.ClearRect(this._position,this._size)}get Direction(){return this._direction}set Direction(e){this._direction=e}}},310:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0,t.Settings={backGroundCanvas:{x:0,y:0,width:615,height:615,color:"#ffaa00"},foreGroundCanvas:{x:0,y:0,width:615,height:615,color:"#ffccaa"},width:500,height:500,nodeCount:4,node:{height:15,width:15,color:"rgba(1,1,1,1)",initialDirection:4},food:{height:15,width:15,color:"white"},level:{easy:160,medium:80,hard:40,extreme:20}}},491:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Snake=void 0;const o=i(243),s=i(310),n=i(382),r=i(917),a=i(737),c=i(87);t.Snake=class{constructor(){this._nodes=[],this._headNodePosition=null,this._currentDirection=s.Settings.node.initialDirection,this.Awake()}Update(){this.UpdateNodes(),this._headNodePosition=this._nodes[0].Position;for(let e=0;e<this._nodes.length;e++)this._nodes[e].Update()}UpdateNodes(){let e=[];var t=new c.Vector2D(this._nodes[0].Position.x,this._nodes[0].Position.y),i=this._nodes[0].Size;a.NodeUtils.UpdateNodePosition(t,this._currentDirection,i.x);var n=new o.SnakeNode(this._currentDirection,i,t,s.Settings.node.color,this._currentDirection);e.push(n);for(let t=0;t<this._nodes.length-1;t++){var r=a.NodeUtils.SetPrevNodePos(e[t].Position,e[t].Direction,e[t].Size.x);let i=new o.SnakeNode(this._nodes[t].Direction,this._nodes[t].Size,r,s.Settings.node.color,this._currentDirection);i._gameDirection=this._currentDirection,e.push(i)}this._nodes=e}Awake(){this.SubscribeToKeyEvents(),this.InitNodes();for(let e=0;e<this._nodes.length;e++)this._nodes[e].Awake()}InitNodes(){for(let e=0;e<s.Settings.nodeCount;e++){let t=new o.SnakeNode(this._currentDirection,new c.Vector2D(s.Settings.node.width,s.Settings.node.height),new c.Vector2D(s.Settings.node.width*(21-e),21*s.Settings.node.height),s.Settings.node.color,this._currentDirection);0==e&&(this._headNodePosition=t.Position),this._nodes.push(t)}}get Head(){return this._headNodePosition}get Direction(){return this._currentDirection}get HN(){return this._nodes[0]}get DoesSnakeOverlaps(){for(let e=1;e<this._nodes.length;e++)if(this._nodes[0].Position.x==this._nodes[e].Position.x&&this._nodes[0].Position.y==this._nodes[e].Position.y)return!0;return!1}AddNewNode(){let e=this._nodes[this._nodes.length-1];var t=a.NodeUtils.SetPrevNodePos(e.Position,e.Direction,e.Size.x);let i=new o.SnakeNode(e.Direction,e.Size,t,s.Settings.node.color,this._currentDirection);this._nodes.push(i)}SubscribeToKeyEvents(){r.KeyboardEvents.ListenKeyboardEvents(),r.KeyboardEvents.SubscribeToDownKey({instance:this,callback:()=>{this._currentDirection!=n.Directions.Down&&this._currentDirection!=n.Directions.Up&&(this._currentDirection=n.Directions.Down,this.UpdateNodes())}}),r.KeyboardEvents.SubscribeToUpKey({instance:this,callback:()=>{this._currentDirection!=n.Directions.Down&&this._currentDirection!=n.Directions.Up&&(this._currentDirection=n.Directions.Up,this.UpdateNodes())}}),r.KeyboardEvents.SubscribeToLeftKey({instance:this,callback:()=>{this._currentDirection!=n.Directions.Left&&this._currentDirection!=n.Directions.Right&&(this._currentDirection=n.Directions.Left,this.UpdateNodes())}}),r.KeyboardEvents.SubscribeToRightKey({instance:this,callback:()=>{this._currentDirection!=n.Directions.Left&&this._currentDirection!=n.Directions.Right&&(this._currentDirection=n.Directions.Right,this.UpdateNodes())}})}}},27:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasApi=void 0,t.CanvasApi=class{constructor(e){this._size=e}Awake(){let e=document.createElement("canvas");e.setAttribute("width",this._size.x.toString()),e.setAttribute("height",this._size.y.toString()),document.body.appendChild(e),this._canvas=e,this._ctx=e.getContext("2d")}get Context(){return this._ctx}get Canvas(){return this._canvas}FillRectangle(e,t,i){this._ctx.beginPath(),this._ctx.fillStyle=i,this._ctx.fillRect(e.x,e.y,t.x,t.y),this._ctx.fill()}ClearRect(e,t){this._ctx.clearRect(e.x,e.y,t.x,t.y)}SetStyle(e){for(const t in e)Object.hasOwnProperty.call(e,t)&&e[t]&&(this._canvas.style[t]=e[t])}DrawLabel(e,t){this._ctx.font="20px Arial",this._ctx.fillStyle="#fff",this._ctx.textAlign="left",this._ctx.fillText(e,t.x,t.y)}}},81:function(e,t,i){var o=this&&this.__createBinding||(Object.create?function(e,t,i,o){void 0===o&&(o=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,o,s)}:function(e,t,i,o){void 0===o&&(o=i),e[o]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||o(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(27),t)},134:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasLayer=void 0;const o=i(310),s=i(81),n=i(87);t.CanvasLayer=class{constructor(){}static get BackgroundCanvas(){return this._backgroundCanvas||(this._backgroundCanvas=new s.CanvasApi(new n.Vector2D(o.Settings.backGroundCanvas.width,o.Settings.backGroundCanvas.height)),this._backgroundCanvas.Awake(),this._backgroundCanvas.SetStyle({zIndex:"0"})),this._backgroundCanvas}static get ForegroundCanvas(){return this._foregroundCanvas||(this._foregroundCanvas=new s.CanvasApi(new n.Vector2D(o.Settings.foreGroundCanvas.width,o.Settings.foreGroundCanvas.height)),this._foregroundCanvas.Awake(),this._foregroundCanvas.SetStyle({zIndex:"1"})),this._foregroundCanvas}}},382:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Directions=void 0,function(e){e[e.Up=1]="Up",e[e.Down=2]="Down",e[e.Left=3]="Left",e[e.Right=4]="Right"}(i||(t.Directions=i={}))},917:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardEvents=void 0;class i{static SubscribeToUpKey(e){let t=this.arrowUpSubscribers.findIndex((t=>t.instance===e.instance));t>-1?this.arrowUpSubscribers[t]=e:this.arrowUpSubscribers.push(e)}static SubscribeToDownKey(e){let t=this.arrowDownSubscribers.findIndex((t=>t.instance===e.instance));t>-1?this.arrowDownSubscribers[t]=e:this.arrowDownSubscribers.push(e)}static SubscribeToLeftKey(e){let t=this.arrowLeftSubscribers.findIndex((t=>t.instance===e.instance));t>-1?this.arrowLeftSubscribers[t]=e:this.arrowLeftSubscribers.push(e)}static SubscribeToRightKey(e){let t=this.arrowRightSubscribers.findIndex((t=>t.instance===e.instance));t>-1?this.arrowRightSubscribers[t]=e:this.arrowRightSubscribers.push(e)}static ListenKeyboardEvents(){document.body.addEventListener("keydown",(function(e){switch(e.key){case"ArrowLeft":i.arrowLeftSubscribers.forEach((e=>{e.callback.call(null)}));break;case"ArrowRight":i.arrowRightSubscribers.forEach((e=>{e.callback.call(null)}));break;case"ArrowUp":i.arrowUpSubscribers.forEach((e=>{e.callback.call(null)}));break;case"ArrowDown":i.arrowDownSubscribers.forEach((e=>{e.callback.call(null)}))}}))}}t.KeyboardEvents=i,i.arrowUpSubscribers=[],i.arrowDownSubscribers=[],i.arrowLeftSubscribers=[],i.arrowRightSubscribers=[]},737:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeUtils=void 0;const o=i(382),s=i(87);t.NodeUtils=class{static UpdateNodePosition(e,t,i){t==o.Directions.Up&&(e.y=e.y-i),t==o.Directions.Down&&(e.y=e.y+i),t==o.Directions.Left&&(e.x=e.x-i),t==o.Directions.Right&&(e.x=e.x+i)}static SetPrevNodePos(e,t,i){let n=new s.Vector2D(e.x,e.y);return t==o.Directions.Up&&(n.y=n.y+i),t==o.Directions.Down&&(n.y=n.y-i),t==o.Directions.Left&&(n.x=n.x+i),t==o.Directions.Right&&(n.x=n.x-i),n}static GenerateRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}static Does2NodeIntersect(e,t){return e.Position.x,e.Size.x,e.Position.y,e.Size.y,t.Position.x,t.Size.x,t.Position.y,t.Size.y,e.Position.x+e.Size.x<t.Position.x||t.Position.x+t.Size.x<e.Position.x||e.Position.y+e.Size.y<t.Position.y||t.Position.y+t.Size.y<e.Position.y}}},87:function(e,t,i){var o=this&&this.__createBinding||(Object.create?function(e,t,i,o){void 0===o&&(o=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,o,s)}:function(e,t,i,o){void 0===o&&(o=i),e[o]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||o(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(232),t)},232:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2D=void 0,t.Vector2D=class{constructor(e,t){this.x=e,this.y=t}}}},t={};function i(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,i),n.exports}(()=>{const e=i(188);window.addEventListener("load",(t=>{new e.Game}))})()})();